define(["jquery","underscore","model/cjs-loader","model/manifest-loader"],function(a,b,c,d){function e(e){var f=this;this.cjsName=e.cjs.name,this.fps="undefined"!=typeof e.fps?e.fps:this.defaultSetting.fps,this.x="undefined"!=typeof e.cjs.x?e.cjs.x:this.defaultSetting.x,this.y="undefined"!=typeof e.cjs.y?e.cjs.y:this.defaultSetting.y,a("#"+e.canvas.elementId).css({width:e.canvas.width+"px",height:e.canvas.height+"px"}),this.canvas=document.getElementById(e.canvas.elementId),this.canvas.width=e.canvas.width,this.canvas.height=e.canvas.height,this.stage=new createjs.Stage(this.canvas),createjs.MotionGuidePlugin.install();var g=[this.cjsName],h=new a.Deferred;c.once("complete",function(){var a=b.flatten(b.map(g,function(a){return c.manifest(a)}));d.once("complete",function(){h.resolve()}),d.loadManifest(a,!0)}),c.loadFiles(g),a.when(h).done(function(){f.container=new createjs.Container,f.container.x=f.x,f.container.y=f.y,f.exportRoot=new lib[f.cjsName],f.container.addChild(f.exportRoot),f.stage.addChild(f.container),createjs.Ticker.setFPS(f.fps),createjs.Ticker.addEventListener("tick",f.stage)})}return e.prototype.defaultSetting={fps:24,x:0,y:0},e.prototype.remove=function(){this.stage.removeChild(this.container),createjs.Ticker.removeEventListener("tick",this.stage),this.stage.autoClear=!0,this.stage.enableDOMEvents(!1),this.stage.removeAllChildren(),this.exportRoot=null},e});
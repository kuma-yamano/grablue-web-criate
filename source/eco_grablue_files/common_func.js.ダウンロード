define(["backbone","jquery","underscore","model/token-data","util/language-message"],function(a,b,c,d,e){var f=function(c,e,f,h){var i="exclude";1===f&&(i="include");var j={},k=new(d.extend({urlRoot:Game.baseUri+e+"/"+i+"/"+c}));a.listenToOnce(k,"sync",function(a){var c,d=a.toJSON();c=0===f?Number(d.exclude):Number(d.include),j=g(c,e),b(h).trigger("success_set_filter",j)}),k.save()},g=function(a,b){var c,d={weapon:{equippedWord:e.getMessage("detail_common_1"),typeWord:e.getMessage("detail_common_2")},summon:{equippedWord:e.getMessage("detail_common_1"),typeWord:e.getMessage("detail_common_3")},npc:{equippedWord:e.getMessage("detail_common_4"),typeWord:e.getMessage("detail_common_5")}},f=d[b].equippedWord,g=d[b].typeWord;switch(a){case 0:break;case 1:c=e.replaceMessage("detail_common_6",[g]);break;case 2:c=e.replaceMessage("detail_common_7",[f]);break;case 3:c=e.getMessage("detail_common_8");break;case 4:c=e.getMessage("detail_common_9")}return{status:a,popBody:c}};return{postFilter:f,getFilterResultData:g}});
define(["model/sound","constant/quest","subroute"],function(a,b){var c={MAIN_QUEST:0,MULTI_BATTLE:1,FATE_EPISODE:2,FREE_QUEST:3,EXTRA_QUEST_WEEK:4,EXTRA_QUEST_TIME:5,RUN_QUEST:6,COOPRAID:7,ESCORT_QUEST:8,DEBUG_QUEST:9,DUNGEON_QUEST:10,EVENT_COOPRAID:11,ARCADE_QUEST:12,JOB_RELEASE:13,TEAMRAID:14,SURVIVAL_QUEST:15,TRIAL_BATTLE:17,EXTRA_QUEST_SERAPHIC:18,ARCARUM_QUEST:19},d=Backbone.SubRoute.extend({routes:{"":"index",air_space:"airSpace",world:"island",island:"island","island/:air_space_id":"island","island/release/:island_id(/:isOpenAirspace)":"islandRelease",index:"index","index/:raid_id":"index","index/island/:location_id":"moveIsland","index/:area_id/:completed_quest_id":"index_area","index/:area_id/:completed_quest_id/:bookmarkPage":"index_area",index_open_airspace:"indexOpenAirspace","supporter/evolution_treasure/:questId/:questType/:isFromParty/:evoType/:baseId/:itemId/:itemKind/:itemNeedNum(/:treasureId)":"supporterEvolutionTreasure","supporter/shop_treasure/:questId/:questType/:isFromParty/:returnHash/:itemId/:itemKind/:itemNeedNum(/:treasureId)":"supporterShopTreasure","supporter/guide/:questId/:questType/:isFromParty/:returnHash/:itemId/:itemKind/:itemNeedNum(/:treasureId)":"supporterGuide","supporter/:quest_id/:type":"supporter","supporter/:quest_id/:type/:is_from_party":"supporter_from_party","supporter/:quest_id/:type/:is_from_party/:treasure_id":"supporter_treasure_raid","supporter/:questId/:type/:isFromParty/:treasureId/:jobDomain":"supporterJobQuest","supporter_lobby/:questId/:type/:useBp/:isFromParty/:roomId/:locationId(/:treasureId)(/:isContinueQuest)":"supporterLobby","supporter_raid/:raid_id/:quest_id/:quest_type/:select_bp":"supporter_raid","supporter_raid/:raid_id/:quest_id/:quest_type/:select_bp/:is_from_party":"supporter_raid_from_party","supporter_raid/:raid_id/:quest_id/:quest_type/:select_bp/:is_from_party/:is_semi":"supporter_raid_is_semi","supporter_raid_do/:raid_id/:quest_id/:quest_type/:select_bp/:is_from_party/:is_semi":"supporterSemiDefendOrder","supporter_defend_order/:quest_id/:quest_type/:select_bp/:is_from_party/:unitType/:defendOrderId/:areaId":"supporterDefendOrder",fate:"fateEpisode","fate(/q:id)(/:nextEpisodeId)":"fateEpisode","fate/pop/:popArcurumNpcId":"fateEpisodePop",extra:"extraQuest","extra/index":"extraQuest","extra/:tab":"extraQuest","extra/:tab/:event_id":"extraQuest",assist:"assist","assist/event":"assist_event","assist/event/:event_id":"assist_event","assist/multi(/:fromPage)":"assistFromPage","assist/unclaimed(/:assistPageType)(/:fromPage)":"assist_unclaimed","assist/history(/:page)(/:assistPageType)(/:fromPage)":"assist_history","assist/research":"assist_research","multi(/:fromPage)":"ownerMultiList","event_scene/:event_id/:scene_id/:isStoryNpc/:forwardFlg":"event_scene","season_event_scene/:scene_id/:isStoryNpc/:seasonEventId/:viewCount/:uniqueId/:forwardFlg":"season_event_scene","season_event_scene/:scene_id/:isStoryNpc/:seasonEventId/:viewCount/:uniqueId/:forwardFlg/:sex":"season_event_scene","scene/:scene_id/:forwardFlg":"scene","scene/:scene_id/:forwardFlg/:locationId":"scene_island_release","scene/:scene_id/:forwardFlg/:area_id/:completed_quest_id":"scene_area","scene_epilogue/:questId/:currentLocationId/:questType/:scene_id/:forwardFlg":"sceneEpilogue","scene_epilogue/pop/:questId/:currentLocationId/:questType/:scene_id/:forwardFlg/:popArcarumNpcId":"sceneEpilogue","scene_epilogue/:questId/:currentLocationId/:questType/:scene_id/:forwardFlg/:locationId":"sceneIslandReleaseEpilogue","scene_epilogue/:questId/:currentLocationId/:questType/:scene_id/:forwardFlg/:area_id/:completed_quest_id":"sceneAreaEpilogue","scene_epilogue/:questId/:currentLocationId/:questType/:scene_id/:forwardFlg/:area_id/:completed_quest_id/:bookmarkPage":"sceneAreaEpilogue","scene_epilogue/:questId/:currentLocationId/:questType/:scene_id/:forwardFlg/:area_id/:completed_quest_id/:bookmarkPage/:firstClear":"sceneAreaEpilogue","scene_intro/:scene_id/:forwardFlg(/:nextUrl)":"sceneIntro","scene_numbers/:scene_id/:forwardFlg/:nextNumbersId":"scene_numbers",stage:"stage","cleared_scene/:sceneId/:questId":"clearedSceneOnly"},airSpace:function(){Game.router.move(),require(["view/quest/air_space"],function(b){a.playQuestMapBGM(),Game.view=new b})},island:function(b){Game.router.move(),require(["view/quest/island"],function(c){a.playQuestMapBGM(),Game.view=new c({airSpaceId:b})})},islandRelease:function(b,c){Game.router.move(),require(["view/quest/islandrelease"],function(d){a.playQuestMapBGM(),Game.view=new d({islandId:b,isOpenAirspace:!!c})})},index:function(a){Game.router.move(),require(["view/quest/index"],function(b){Game.view=new b({selected_area_id:"",raid_id:a,isShowAirSpacePop:!1})})},moveIsland:function(a){Game.router.move(),require(["view/quest/index"],function(b){Game.view=new b({selected_area_id:"",locationId:a})})},index_area:function(a,b,c){Game.router.move(),require(["view/quest/index"],function(d){Game.view=new d({selected_area_id:a,completed_quest_id:b,bookmarkPage:c,isShowAirSpacePop:!1})})},indexOpenAirspace:function(){Game.router.move(),require(["view/quest/index"],function(a){Game.view=new a({selected_area_id:"",isShowAirSpacePop:!0})})},supporter:function(b,d){d=d||"0",Game.router.move(),require(["view/quest/supporters"],function(e){+d===c.COOPRAID||+d===c.TRIAL_BATTLE?a.playQuestMapBGM("normal"):a.playQuestSupporterBGM(null,b),Game.view=new e({quest_id:b,type:d})})},supporter_from_party:function(b,d,e){d=d||"0",Game.router.move(),require(["view/quest/supporters"],function(f){+d===c.COOPRAID||+d===c.TRIAL_BATTLE?a.playQuestMapBGM("normal"):a.playQuestSupporterBGM(null,b),Game.view=new f({quest_id:b,type:d,is_from_party:e})})},supporter_treasure_raid:function(b,c,d,e){c=c||"0",Game.router.move(),require(["view/quest/supporters"],function(f){a.playQuestSupporterBGM(null,b),Game.view=new f({quest_id:b,type:c,is_from_party:d,treasure_id:e})})},supporterJobQuest:function(b,c,d,e,f){c=c||"0",Game.router.move(),require(["view/quest/supporters"],function(g){a.playQuestSupporterBGM(null,b),Game.view=new g({quest_id:b,type:c,is_from_party:d,treasure_id:e,jobDomain:f})})},supporterEvolutionTreasure:function(b,c,d,e,f,g,h,i,j){Game.router.move(),require(["view/quest/supporters"],function(k){a.playQuestSupporterBGM(null,b),Game.view=new k({quest_id:b,type:c,is_from_party:d,evoType:e,baseId:f,itemId:g,itemKind:h,itemNeedNum:i,treasure_id:j,isFromEvolution:!0})})},supporterShopTreasure:function(b,c,d,e,f,g,h,i){Game.router.move(),require(["view/quest/supporters"],function(j){a.playQuestSupporterBGM(null,b),Game.view=new j({quest_id:b,type:c,is_from_party:d,returnHash:e,itemId:f,itemKind:g,itemNeedNum:h,treasure_id:i,isFromShopTreasure:!0})})},supporterGuide:function(b,c,d,e,f,g,h,i){Game.router.move(),require(["view/quest/supporters"],function(j){a.playQuestSupporterBGM(null,b),Game.view=new j({quest_id:b,type:c,is_from_party:d,returnHash:e,itemId:f,itemKind:g,itemNeedNum:h,treasure_id:i,isFromGuide:!0})})},supporterLobby:function(b,c,d,e,f,g,h,i){Game.router.move(),require(["view/quest/supporters"],function(j){i=1===+i,a.playQuestSupporterBGM(g,b),Game.view=new j({quest_id:b,type:c,is_from_party:e,useBp:d,lobbyRoomId:f,locationId:g,treasure_id:h||void 0,isContinueQuest:i,isLobbyMulti:!0})})},supporter_raid:function(b,c,d,e){Game.router.move(),require(["view/quest/supporters-raid"],function(f){a.playQuestSupporterBGM(null,c),Game.view=new f({raid_id:b,quest_id:c,quest_type:d,select_bp:e})})},supporter_raid_from_party:function(b,c,d,e,f){Game.router.move(),require(["view/quest/supporters-raid"],function(g){a.playQuestSupporterBGM(null,c),Game.view=new g({raid_id:b,quest_id:c,quest_type:d,select_bp:e,is_from_party:f})})},supporter_raid_is_semi:function(b,c,d,e,f,g){Game.router.move(),require(["view/quest/supporters-raid"],function(h){a.playBGM("bgm/01_main_04.mp3"),Game.view=new h({raid_id:b,quest_id:c,quest_type:d,select_bp:e,is_from_party:f,is_semi:g})})},supporterSemiDefendOrder:function(a,b,c,d,e,f){Game.router.move(),require(["view/quest/supporters-raid"],function(g){Game.view=new g({raid_id:a,quest_id:b,quest_type:c,select_bp:d,is_from_party:e,is_semi:f,isDefendOrderSemi:!0})})},supporterDefendOrder:function(a,b,c,d,e,f,g){Game.router.move(),require(["view/quest/supporters-raid"],function(h){var i={quest_id:a,quest_type:b,select_bp:c,is_from_party:d,isDefendOrderMulti:!0,unitType:e,defendOrderId:f,areaId:g};Game.view=new h(i)})},fateEpisode:function(b,c){Game.router.move(),require(["view/quest/fate"],function(d){a.playQuestMapBGM("normal"),Game.view=new d({id:b,nextEpisodeId:c})})},fateEpisodePop:function(b){Game.router.move(),require(["view/quest/fate"],function(c){a.playQuestMapBGM("normal"),Game.view=new c({popArcarumNpcId:b})})},extraQuest:function(a,b){Game.router.move(),require(["view/quest/extra"],function(c){Game.view=new c({tab:a,eventId:b||null})})},assist:function(){Game.router.move(),require(["view/quest/assist"],function(b){a.playQuestMapBGM(),Game.view=new b({tabFlag:"multi"})})},assist_event:function(b){Game.router.move(),require(["view/quest/assist"],function(c){b?a.playQuestMapBGM("event",void 0,b):a.playQuestMapBGM(),Game.view=new c({tabFlag:"event",fromPage:b||1})})},assistFromPage:function(a){a=+(a||0),Game.router.move(),require(["view/quest/assist"],function(b){this.playQuestMapBGM(a),Game.view=new b({tabFlag:"multi",assistPageType:0,fromPage:a})}.bind(this))},assist_unclaimed:function(a,b){a=+(a||0),b=+(b||0),Game.router.move(),require(["view/quest/assist_unclaimed"],function(c){this.playQuestMapBGM(b),Game.view=new c({assistPageType:a,fromPage:b})}.bind(this))},assist_history:function(a,b,c){b=+(b||0),c=+(c||0),Game.router.move(),require(["view/quest/assist_history"],function(d){this.playQuestMapBGM(c),Game.view=new d({page:a,assistPageType:b,fromPage:c})}.bind(this))},assist_research:function(){Game.router.move(),require(["view/quest/assist"],function(b){a.playQuestMapBGM(),Game.view=new b({tabFlag:"multi",research:!0})})},ownerMultiList:function(a){a=+(a||0),Game.router.move(),require(["view/quest/assist"],function(b){this.playQuestMapBGM(a),Game.view=new b({tabFlag:"multi",assistPageType:1,fromPage:a})}.bind(this))},event_scene:function(a,b,c,d){b||(b=null),Game.router.move(),require(["view/quest/campaign-scene-app"],function(e){Game.view=new e({event_id:a,scene_id:b,isStoryNpc:c,forwardFlg:d,area_id:""})})},season_event_scene:function(a,b,c,d,e,f,g){Game.router.move(),require(["view/quest/campaign-scene-app"],function(h){Game.view=new h({scene_id:a,isStoryNpc:b,seasonEventId:c,viewCount:e,forwardFlg:f,uniqueId:d,sex:g})})},scene:function(a,b){a||(a=null),Game.router.move(),require(["view/quest/event-scene-app"],function(c){Game.view=new c({scene_id:a,forwardFlg:b,area_id:""})})},scene_island_release:function(a,b,c){Game.router.move(),require(["view/quest/event-scene-app"],function(d){Game.view=new d({scene_id:a,forwardFlg:b,location_id:c})})},scene_area:function(a,b,c,d){a||(a=null),Game.router.move(),require(["view/quest/event-scene-app"],function(e){Game.view=new e({scene_id:a,forwardFlg:b,area_id:c,completed_quest_id:d})})},sceneEpilogue:function(a,b,c,d,e,f){d||(d=null),Game.router.move(),require(["view/quest/event-scene-app"],function(g){Game.view=new g({questId:a,currentLocationId:b,questType:c,scene_id:d,forwardFlg:e,area_id:"",popArcarumNpcId:f})})},sceneIslandReleaseEpilogue:function(a,b,c,d,e,f){d||(d=null),Game.router.move(),require(["view/quest/event-scene-app"],function(g){Game.view=new g({questId:a,currentLocationId:b,questType:c,scene_id:d,forwardFlg:e,location_id:f})})},sceneAreaEpilogue:function(a,b,c,d,e,f,g,h,i){d||(d=null),Game.router.move(),require(["view/quest/event-scene-app"],function(j){Game.view=new j({questId:a,currentLocationId:b,questType:c,scene_id:d,forwardFlg:e,area_id:f,completed_quest_id:g,bookmarkPage:h,firstClear:i})})},sceneIntro:function(a,b,c){a||(a=null),Game.router.move(),require(["view/quest/event-scene-app"],function(d){Game.view=new d({scene_id:a,forwardFlg:b,nextUrl:c||"",area_id:"",force_firststory_play:1})})},scene_numbers:function(a,b,c){Game.router.move(),require(["view/quest/event-scene-app"],function(d){Game.view=new d({scene_id:a,forwardFlg:b,nextNumbersId:c})})},stage:function(){Game.router.move(),require(["view/quest/stage-app"],function(a){Game.view=new a})},clearedSceneOnly:function(a,c){Game.router.move(),require(["view/quest/event-scene-app"],function(d){var e=b.SCENE_RETURN_ID.REDIRECT_URL;Game.view=new d({scene_id:a,questId:c,forwardFlg:e,clearedSceneOnly:!0})})},playQuestMapBGM:function(b){0===b?a.playQuestMapBGM("normal"):1===b?a.playQuestMapBGM():a.playQuestMapBGM("event",void 0,b)}});return d});
define(["backbone","model/content","view/content","util/page-slider","util/language-message"],function(a,b,c,d,e){var f="completeRender",g=c.extend({param:null,params:null,suggestMainQuestFlg:!1,el:".prt-quest-intro",initialize:function(a){this.param=a,this.params={isRecommendMenuShowFlg:a.isRecommendMenuShowFlg?1:0,isBookmarkMenuShowFlg:a.isBookmarkMenuShowFlg?1:0,page:a.page||0},this.isQuestIndex=a.isQuestIndex||!1,this.questContentData=a.questContentData||{},this.suggestMainQuestFlg=a.suggestMainQuestFlg||!1;var c=new b({controller:"quest",action:"_index",param:this.params});this.isQuestIndex?(c.set({data:this.questContentData.content__index,option:{isSubView:!0}}),this.render(c)):this.getListContent(c)},getListContent:function(a){this.stopListening(a,"sync"),this.listenToOnce(a,"sync",this.render),a.fetch()},render:function(a){this.content_render(a);var b=!1,c=this.params.isRecommendMenuShowFlg,d=this.params.isBookmarkMenuShowFlg,g=null,h=null,i=null,j={0:{key:[200011],banner:"",comment:e.getMessage("quest_61"),type:""},1:{key:[200012,200013],banner:"4",comment:"",type:""},2:{key:[200014,200021],banner:"6",comment:e.getMessage("quest_62"),type:"water"},3:{key:[200022,200023,200024,200031],banner:"10",comment:e.getMessage("quest_63"),type:"earth"},4:{key:[200032,200033,200034,200041],banner:"14",comment:e.getMessage("quest_64"),type:"wind"}};for(g in j){i=j[g];for(h in i.key)if($("#last_area_id").val()==i.key[h]||!$("#last_area_id").val()){if(b=!0,0==g){if($(".btn-character-quest").remove(),0==$(".prt-list-contents .lis-quest-list.main").length)break;$(".prt-list-contents .week").parent().remove(),$(".prt-list-contents .time").parent().remove(),$(".prt-list-contents .free").parent().remove(),$(".btn-event.event").hide(),$('.prt-list-contents .lis-quest-list.main:not(".ico-clear")').after(_.template($("#tpl-beginner-frame").html(),{comment:i.comment}));break}if(4!=g){$(".btn-event.event").hide(),$(".btn-event.incentive").html(_.template($("#tpl-incentive-banner").html(),{banner:i.banner,title:i.comment,type:i.type}));break}0==$(".btn-event.event").length?($(".btn-event.event").hide(),$(".btn-event.incentive").html(_.template($("#tpl-incentive-banner").html(),{banner:i.banner,title:i.comment,type:i.type}))):b=!1}if(b)break}return b||$(".btn-event.event").show(),this.renderQuestBase(c,d),this.numRepStatus($(".icon-power"),"num-power"),this.trigger(f),Game.loading.xhrEnd(),this},renderQuestBase:function(a,b){var c=$(".btn-recommend"),f=$(".btn-favorite"),g=$(".prt-quest-base"),h=$(".prt-quest-recommend"),i=$(".prt-quest-favorite"),j=$(".prt-quest-place"),k=$(".btn-bookmark-record"),l=$(".btn-quest-release"),m=$("#prt-bookmark-pagination");if($(".prt-quest-recommend, .prt-quest-favorite").remove(),a)c.removeClass("visible"),g.prepend($("#tpl-recommend-image").html()),h.css("display","block"),g.find(".prt-suggest-main-quest").css("display",this.suggestMainQuestFlg?"block":"none"),g.find(".prt-txt-quest-recommend").css("display",this.suggestMainQuestFlg?"none":"block"),i.css("display","none"),j.remove(),k.removeClass("open close"),l.css("display","none"),m.empty(),"true"==$("#beginner_flg").val()?f.removeClass("visible"):f.addClass("visible");else if(b)if(c.removeClass("relocation").addClass("visible"),f.removeClass("visible"),g.prepend($("#tpl-favorite-image").html()),h.css("display","none"),i.css("display","block"),j.remove(),this.$el.find("div.prt-list-contents").attr("data-bookmark-id")){k.removeClass("close").addClass("open"),l.css("display","none");var n={paging:$("#prt-bookmark-pagination"),text:$("#prt-bookmark-pager-text")},o={page:$("#bookmark_page_current").val(),first:$("#bookmark_page_first").val(),prev:$("#bookmark_page_prev").val(),next:$("#bookmark_page_next").val(),last:$("#bookmark_page_last").val()};d.render(o,!0,n)}else this.$el.find(".prt-noindex-list").html('<div class="txt-notice-bookmark">'+e.getMessage("quest_65")+"</div>"),k.removeClass("open close"),l.css("display","none");else{var p={placeImage:$("#area_image").val(),placeName:$("#area_name").val()};g.prepend(_.template($("#tpl-place").html(),p)),h.css("display","none"),i.css("display","none"),k.removeClass("open close"),l.css("display","none"),m.empty()}},_check_mutil_battle:function(a){a?$(".btn-multi-quest").show():$(".btn-multi-quest").hide()}},{EVENT_COMPLETE_RENDER:f});return g});
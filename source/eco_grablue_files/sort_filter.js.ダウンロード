define(["view/content","view/popup","view/common/filter_config","lib/jquery.tabs","model/sound","util/language-message"],function(a,b,c,d,e,f){var g=a.extend({sortData:[],filterData:[],enhancementSortText:null,simpleSortSelectText:null,sortItemText:null,defaultSortData:[1,4],defaultSpecialTiketSortData:[4,3],checkBoxProcessingData:[null,null,null,null,null,["rarity-check",[0,0,0,0,0],c.DATA_ID.RARITY],["attribute-check",[0,0,0,0,0,0],c.DATA_ID.ATTRIBUTE],["type-check",[0,0,0,0,0],c.DATA_ID.BATTLE_STYLE],["weapon-kind-check",[0,0,0,0,0,0,0,0,0,0],c.DATA_ID.WEAPON_TYPE],["has-bonus-check",[0],c.DATA_ID.BONUS],["has-skill-check",[0],c.DATA_ID.HAS_SKILL],["has-not-skill-check",[0],c.DATA_ID.NO_SKILL],["is-angel-check",[0],c.DATA_ID.ANGEL],["race-check",[0,0,0,0,0,0],c.DATA_ID.RACE],null,null,null,null,["sex-check",[0,0,0],c.DATA_ID.GENDER],["only-playable-character-check",[0],c.DATA_ID.PLAYABLE_CHARACTER],["possession-check",[0],c.DATA_ID.POSSSESION],["no-bonus-check",[0],c.DATA_ID.NO_BONUS],["is-element-check",[0],c.DATA_ID.ELEMENT],null,["series-check",[],c.DATA_ID.SERIES],["lv-max-check",[0],c.DATA_ID.LEVEL_MAX],["ignore-lv-max-check",[0],c.DATA_ID.IGNORE_LEVEL_MAX],["skill-max-check",[0],c.DATA_ID.SKILL_LEVEL_MAX],["ignore-skill-max-check",[0],c.DATA_ID.IGNORE_SKILL_LEVEL_MAX],["specialty-check",[0,0,0,0,0,0,0,0,0,0],c.DATA_ID.SPECIALTY]],notCountFilterKeyList:[""+c.DATA_ID.BONUS,""+c.DATA_ID.HAS_SKILL,""+c.DATA_ID.NO_SKILL,""+c.DATA_ID.PLAYABLE_CHARACTER,""+c.DATA_ID.POSSSESION,""+c.DATA_ID.NO_BONUS,""+c.DATA_ID.NO_SKILL_PRESENT,""+c.DATA_ID.SERIES,""+c.DATA_ID.LEVEL_MAX,""+c.DATA_ID.IGNORE_LEVEL_MAX,""+c.DATA_ID.SKILL_LEVEL_MAX,""+c.DATA_ID.IGNORE_SKILL_LEVEL_MAX],hasOther:!0,changeSelectSortOK:!0,isExceptionType:!1,shouldDisplayNoticeText:!1,kindString:"",isSortReset:!1,events:{"tap .pop-set-sort-filter .btn-sort-detail":"popSelectSort","tap .pop-set-sort-filter .btn-filter-detail":"popSelectFilter","tap .pop-set-sort-filter .btn-usual-cancel":"popRemove","tap .pop-set-sort-filter .btn-usual-ok":"completeSortFilterData","tap .pop-filter-enhancement .btn-usual-ok":"setFilter","tap .pop-filter-enhancement .btn-usual-cancel":"backSortSetting","tap .pop-filter-enhancement .btn-reset-filter":"resetSortFilter","tap .pop-sort-enhancement .btn-usual-ok":"setSort","tap .pop-sort-enhancement .btn-usual-cancel":"backSortSetting","tap .pop-custom-filter .btn-usual-ok":"setFilter","tap .pop-custom-filter .btn-reset-filter":"resetSortFilter","tap .pop-custom-filter .btn-usual-cancel":"popRemove",'change .pop-custom-filter input[type="checkbox"]':"countCheckBox","tap .pop-empty-list .btn-usual-close":"popCustomFilter","change .frm-select-simple-sort":"changeSelectSort","change .pop-custom-filter input[data-radio-category]":"onChangeRessettableRadioBtn","tap .pop-sort-change .btn-usual-ok":"setSortChange","tap .pop-sort-change .btn-usual-cancel":"popRemove","tap .pop-sort-change .btn-reset-sort":"resetSortCondition",'change .pop-sort-change input[name="second-condition-check"]':"onChangeSecondCondition"},setInitialData:function(a,b,c,d){this.isExceptionType=d||!1,this.sortData=c.sort,this.sortKind=b,this.sortData[1]||(this.sortData[1]=this.getDefaultSortData()),this.filterData=c.filter||null},setSimpleSort:function(a,b,c,d,e){this.setInitialData(a,b,c,d);var f=e||!1;(_.isNull(this.simpleSortSelectText)||this.isExceptionType===!0)&&this.setSortPopText(this._getContentType(this.isExceptionType,b),f);var g=_.template($("#tpl-prt-simple-sort").html()),h=this.sortData[1][1]+("0"+this.sortData[1][0]).slice(-2),i=this.simpleSortSelectText[h][0],j={kind:b,sortData:this.sortData[1],selectedText:i,optionTextObj:this.simpleSortSelectText,isArchaicPossession:f};$(a).html(g(j))},setFilterParam:function(a,b,c,d,e){this.setInitialData(a,b,c,d);var f=e||!1;(_.isNull(this.sortItemText)||this.isExceptionType===!0)&&this.setSortPopText(this._getContentType(this.isExceptionType,b),f);var g=this.sortData[1][1]+("0"+this.sortData[1][0]).slice(-2),h=this.sortItemText[g][0];this.hasOther=_.isUndefined(c.hasOther)?!0:c.hasOther,$(a).text(h),this.showFilterCount()},showFilterCount:function(){var a=_.isNull(this.filterData)||_.isUndefined(this.filterData[24])?0:this.filterData[24].length,b=_.chain(this.filterData).omit(this.notCountFilterKeyList).values().value().join("").split("0").join("").length;this.showCheckCountIcon(this.$el.find(".prt-custom-count"),b+a)},changeSelectSort:function(a){if(this.changeSelectSortOK){var b=$(a.currentTarget),c=b.find("option:selected");this.sortData[1][0]=c.data("sort-param"),this.sortData[1][1]=c.data("ascending-type"),this.completeSortFilterData()}},setSortFilterData:function(a,b,c,d){this.viewContent=a,this.viewContentKind=b,this.sortData=c.sort||[],this.sortData[1]||(this.sortData[1]=this.getDefaultSortData()),this.filterData=c.filter||null,this.shouldDisplayNoticeText=d||!1,this.kindString=b,this.checkBoxDataKey=this.getCheckBoxDataKey(a,b)},popSortSetting:function(a){this.popView&&this.popRemove(a),(_.isNull(this.enhancementSortText)||this.isExceptionType===!0)&&this.setPropertyEnhancementSortText(this._getContentType(this.isExceptionType,this.kindString));var c=this.sortData[1]?this.sortData[1][0]:0,d=this.sortData[2]?this.sortData[2][0]:0,e={0:this.enhancementSortText[c],1:this.enhancementSortText[d]},g={sortButtonsLabel:e,canFilter:this.filterData?!0:!1,content:this.viewContent,kind:this.viewContentKind,shouldDisplayNoticeText:this.shouldDisplayNoticeText},h=_.template($("#tpl-pop-set-sort-filter").html(),g);this.popView=new b({className:"pop-set-sort-filter",title:f.getMessage("sort_filter_51"),body:h,flagBtnCancel:1,flagBtnOk:1}),this.popView.render().popShow()},popSelectSort:function(a){this.popView&&this.popRemove(a);var c=$(a.currentTarget),d=1;c.hasClass("first")||(d=2);var e={sortData:this.sortData[d]||this.getDefaultSortData(),content:this.viewContent,kind:this.viewContentKind},g="#tpl-pop-sort-enhancement",h=_.template($(g).html(),e);this.popView=new b({className:"pop-sort-enhancement",title:f.getMessage("sort_filter_52"),body:h,flagBtnCancel:1,flagBtnOk:1}),this.popView.render().popShow(),this.popView.$el.find(".btn-usual-ok").attr("data-condition-type",d)},popSelectFilter:function(a){this.popView&&this.popRemove(a);var c=this;this.filterSetElemName="pop-filter-enhancement",this.checkNameArray=[];var d=[],e=_.clone(this.checkBoxProcessingData);_.each(this.checkBoxDataKey,function(a){c.filterData[a]?_.isNumber(c.filterData[a])||2>c.filterData[a].length?(d[a]=[],d[a][0]=c.filterData[a]):d[a]=c.filterData[a].split(""):d[a]=[],c.checkNameArray.push(e[a])});var g={filterData:d,checkBoxDataKey:this.checkBoxDataKey,content:this.viewContent,kind:this.viewContentKind},h=_.template($("#tpl-pop-filter-enhancement").html(),g);this.popView=new b({className:this.filterSetElemName,title:f.getMessage("sort_filter_53"),body:h,flagBtnCancel:1,flagBtnOk:1}),this.popView.render().popShow()},popCustomFilter:function(a){this.popView?this.popRemove(a):_.isUndefined(a)||this.stopEventPropagation(a,!0);var c=this,d="npc"!==this.viewContentKind&&"exception_weapon"!==this.viewContentKind,e=d||this.hasOther?d&&this.hasOther?"tab-type-3":"tab-type-2":"tab-type-1";this.filterSetElemName="pop-custom-filter",this.checkNameArray=[];var g=[],h=_.clone(this.checkBoxProcessingData);_.each(this.checkBoxDataKey,function(a){c.filterData[a]?24===a?g[a]=c.filterData[a]:_.isNumber(c.filterData[a])||2>c.filterData[a].length?(g[a]=[],g[a][0]=c.filterData[a]):g[a]=c.filterData[a].split(""):g[a]=[],c.checkNameArray.push(h[a])});var i={filterData:g,checkBoxDataKey:this.checkBoxDataKey,content:this.viewContent,kind:this.viewContentKind,hasSeries:d,hasOther:this.hasOther,tabClassName:e},j=_.template($("#tpl-pop-custom-filter").html(),i);this.popView=new b({className:this.filterSetElemName,title:f.getMessage("sort_filter_53"),body:j,flagBtnCancel:1,flagBtnOk:1}),this.popView.render(),this.popView.$el.find(".js-custom-filter-tab").tabs({tabClass:"btn-filter-type",tabTarg:"prt-custom-filter-box"}),d&&(this.popView.$el.find(".js-series-tab").tabs({tabClass:"btn-series-tab",tabTarg:"is-series"}),this.seriesCheckProp(g[24])),this.setTabCount(),this.popView.popShow()},setTabCount:function(){var a=this,b={},c=0;_.each(["first","second","third"],function(d){b=a.popView.$el.find(".prt-condition-count."+d),c=a.popView.$el.find(".prt-custom-filter-box."+d+' input[type="checkbox"]:checked').length||0,a.showCheckCountIcon(b,c)})},seriesCheckProp:function(a){if(!_.isEmpty(a)){var b=this;_.each(a,function(a){b.popView.$el.find(".js-target-"+a).prop("checked",!0)})}},setSort:function(a){var b=this.popView.$el.find(".pop-sort-enhancement");if(!b.hasClass("pop-show"))return!1;var c=$(a.currentTarget),d=c.data("condition-type"),e=this.getSortRadioValue(b,["sort-condition","ascending-radio"]);this.sortData[d]=e,this.popSortSetting()},getSortRadioValue:function(a,b){var c=_(b).map(function(b){var c=a.find('input[name="'+b+'"]'),d=0;return c.each(function(){$(this).prop("checked")&&(d=Number($(this).val()))}),d});return c},setFilter:function(){var a=this.popView.$el.find("."+this.filterSetElemName);if(!a.hasClass("pop-show"))return!1;var b=this;_(this.checkNameArray).each(function(c){b.filterData[c[2]]=b.getCheckValue(a,c[0],c[1])}),"pop-filter-enhancement"===this.filterSetElemName?this.popSortSetting():this.completeSortFilterData()},getCheckValue:function(a,b,c){var d=a.find('input[name="'+b+'"]'),e="series-check",f=_.clone(c);d.each(function(){$(this).prop("checked")&&(b===e?f.push(+$(this).val()):"radio"===$(this).attr("type")?f[0]=$(this).val():f[$(this).val()]=1)});var g=b===e?f:f.join("");return g},completeSortFilterData:function(){$("#pop").trigger("complete_set_sort",[this.sortData,this.filterData]),this.sortData=this.filterData=[],this.popView&&this.popRemove()},getCheckBoxDataKey:function(a,b){var d=[];switch(a){case"list":switch(b){case"npc":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.BATTLE_STYLE,c.DATA_ID.RACE,c.DATA_ID.GENDER,c.DATA_ID.SPECIALTY];break;case"weapon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.WEAPON_TYPE,c.DATA_ID.BONUS,c.DATA_ID.HAS_SKILL,c.DATA_ID.NO_SKILL,c.DATA_ID.ANGEL,c.DATA_ID.NO_BONUS,c.DATA_ID.ELEMENT,c.DATA_ID.SERIES,c.DATA_ID.LEVEL_MAX,c.DATA_ID.IGNORE_LEVEL_MAX,c.DATA_ID.SKILL_LEVEL_MAX,c.DATA_ID.IGNORE_SKILL_LEVEL_MAX];break;case"summon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.BONUS,c.DATA_ID.ANGEL,c.DATA_ID.NO_BONUS,c.DATA_ID.ELEMENT,c.DATA_ID.SERIES,c.DATA_ID.LEVEL_MAX,c.DATA_ID.IGNORE_LEVEL_MAX]}break;case"sell":switch(b){case"weapon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.WEAPON_TYPE,c.DATA_ID.BONUS,c.DATA_ID.HAS_SKILL,c.DATA_ID.NO_SKILL,c.DATA_ID.ANGEL,c.DATA_ID.NO_BONUS,c.DATA_ID.ELEMENT,c.DATA_ID.SERIES,c.DATA_ID.LEVEL_MAX,c.DATA_ID.IGNORE_LEVEL_MAX,c.DATA_ID.SKILL_LEVEL_MAX,c.DATA_ID.IGNORE_SKILL_LEVEL_MAX];break;case"summon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.BONUS,c.DATA_ID.ANGEL,c.DATA_ID.NO_BONUS,c.DATA_ID.ELEMENT,c.DATA_ID.SERIES,c.DATA_ID.LEVEL_MAX,c.DATA_ID.IGNORE_LEVEL_MAX]}break;case"decompose":switch(b){case"weapon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.WEAPON_TYPE,c.DATA_ID.BONUS,c.DATA_ID.HAS_SKILL,c.DATA_ID.NO_SKILL,c.DATA_ID.SERIES,c.DATA_ID.NO_BONUS];break;case"summon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.SERIES,c.DATA_ID.BONUS,c.DATA_ID.NO_BONUS]}break;case"enhancement_base":switch(b){case"npc":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.BATTLE_STYLE,c.DATA_ID.RACE,c.DATA_ID.GENDER,c.DATA_ID.SPECIALTY];break;case"weapon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.WEAPON_TYPE,c.DATA_ID.ANGEL,c.DATA_ID.ELEMENT,c.DATA_ID.SERIES,c.DATA_ID.LEVEL_MAX,c.DATA_ID.IGNORE_LEVEL_MAX,c.DATA_ID.SKILL_LEVEL_MAX,c.DATA_ID.IGNORE_SKILL_LEVEL_MAX];break;case"summon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.ANGEL,c.DATA_ID.ELEMENT,c.DATA_ID.SERIES,c.DATA_ID.BONUS,c.DATA_ID.NO_BONUS,c.DATA_ID.LEVEL_MAX,c.DATA_ID.IGNORE_LEVEL_MAX]}break;case"enhancement_material":switch(b){case"npc":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.WEAPON_TYPE,c.DATA_ID.BONUS,c.DATA_ID.HAS_SKILL,c.DATA_ID.NO_SKILL,c.DATA_ID.ANGEL,c.DATA_ID.NO_BONUS,c.DATA_ID.ELEMENT,c.DATA_ID.SERIES,c.DATA_ID.LEVEL_MAX,c.DATA_ID.IGNORE_LEVEL_MAX,c.DATA_ID.SKILL_LEVEL_MAX,c.DATA_ID.IGNORE_SKILL_LEVEL_MAX];break;case"weapon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.WEAPON_TYPE,c.DATA_ID.BONUS,c.DATA_ID.HAS_SKILL,c.DATA_ID.NO_SKILL,c.DATA_ID.ANGEL,c.DATA_ID.NO_BONUS,c.DATA_ID.ELEMENT,c.DATA_ID.SERIES,c.DATA_ID.LEVEL_MAX,c.DATA_ID.IGNORE_LEVEL_MAX,c.DATA_ID.SKILL_LEVEL_MAX,c.DATA_ID.IGNORE_SKILL_LEVEL_MAX];break;case"summon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.BONUS,c.DATA_ID.ANGEL,c.DATA_ID.NO_BONUS,c.DATA_ID.ELEMENT,c.DATA_ID.SERIES,c.DATA_ID.LEVEL_MAX,c.DATA_ID.IGNORE_LEVEL_MAX]}break;case"evolution_base":switch(b){case"npc":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.BATTLE_STYLE,c.DATA_ID.RACE,c.DATA_ID.GENDER,c.DATA_ID.SPECIALTY];break;case"weapon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.WEAPON_TYPE,c.DATA_ID.ANGEL,c.DATA_ID.ELEMENT,c.DATA_ID.SERIES,c.DATA_ID.LEVEL_MAX,c.DATA_ID.IGNORE_LEVEL_MAX,c.DATA_ID.SKILL_LEVEL_MAX,c.DATA_ID.IGNORE_SKILL_LEVEL_MAX];break;case"summon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.ANGEL,c.DATA_ID.ELEMENT,c.DATA_ID.SERIES,c.DATA_ID.BONUS,c.DATA_ID.NO_BONUS,c.DATA_ID.LEVEL_MAX,c.DATA_ID.IGNORE_LEVEL_MAX]}break;case"party":switch(b){case"npc":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.BATTLE_STYLE,c.DATA_ID.RACE,c.DATA_ID.GENDER,c.DATA_ID.SPECIALTY];break;case"weapon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.WEAPON_TYPE,c.DATA_ID.ANGEL,c.DATA_ID.SERIES,c.DATA_ID.LEVEL_MAX,c.DATA_ID.IGNORE_LEVEL_MAX,c.DATA_ID.SKILL_LEVEL_MAX,c.DATA_ID.IGNORE_SKILL_LEVEL_MAX];break;case"summon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.ANGEL,c.DATA_ID.ELEMENT,c.DATA_ID.SERIES]}break;case"profile":switch(b){case"summon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.SERIES]}break;case"gacha_surprise":switch(b){case"exception_weapon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.BATTLE_STYLE,c.DATA_ID.RACE,c.DATA_ID.GENDER,c.DATA_ID.POSSSESION,c.DATA_ID.SPECIALTY];break;case"weapon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.WEAPON_TYPE,c.DATA_ID.POSSSESION,c.DATA_ID.SERIES];break;case"summon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.POSSSESION,c.DATA_ID.SERIES]}break;case"specialTicket":switch(b){case"exception_weapon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.BATTLE_STYLE,c.DATA_ID.RACE,c.DATA_ID.GENDER,c.DATA_ID.POSSSESION,c.DATA_ID.SPECIALTY];break;case"weapon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.WEAPON_TYPE,c.DATA_ID.POSSSESION,c.DATA_ID.SERIES];break;case"summon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.POSSSESION,c.DATA_ID.SERIES]}break;case"recycle":switch(b){case"weapon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.WEAPON_TYPE,c.DATA_ID.BONUS,c.DATA_ID.HAS_SKILL,c.DATA_ID.NO_SKILL,c.DATA_ID.ANGEL,c.DATA_ID.NO_BONUS,c.DATA_ID.ELEMENT,c.DATA_ID.SERIES];break;case"summon":d=[c.DATA_ID.RARITY,c.DATA_ID.ATTRIBUTE,c.DATA_ID.BONUS,c.DATA_ID.ANGEL,c.DATA_ID.NO_BONUS,c.DATA_ID.ELEMENT,c.DATA_ID.SERIES]}}return d},backSortSetting:function(){this.popSortSetting()},resetSortFilter:function(){this.popView.$el.find(".prt-check-one input").removeAttr("checked");var a=this.popView.$el.find(".prt-radio-one").find("input");a.removeAttr("checked"),a.each(function(){0==$(this).val()&&$(this).prop("checked",!0).attr("checked",!0)}),this.showCheckCountIcon(this.popView.$el.find(".prt-condition-count"),0)},popEmptyList:function(a){this.popView=new b({className:"pop-empty-list",title:f.getMessage("sort_filter_53"),body:_.template($("#tpl-pop-empty-list").html(),{categoryType:+a}),flagBtnClose:1}),this.popView.render().popShow()},popRemove:function(a){this.popView.popRemove(),a&&(e.playButtonSE($(a.currentTarget)),a.preventDefault(),a.stopPropagation())},setPropertyEnhancementSortText:function(a){this.enhancementSortText={0:f.getMessage("sort_filter_1"),1:0===a?f.getMessage("sort_01_btn_type_0"):1===a?f.getMessage("sort_01_btn_type_1"):f.getMessage("sort_01_btn_type_2"),2:0===a?f.getMessage("sort_02_btn_type_0"):1===a?f.getMessage("sort_02_btn_type_1"):f.getMessage("sort_02_btn_type_2"),3:f.getMessage("sort_03_btn"),4:f.getMessage("sort_04_btn"),5:2===a?f.getMessage("sort_05_btn_type_2"):f.getMessage("sort_05_btn_type_0"),6:f.getMessage("sort_06_btn"),7:f.getMessage("sort_07_btn"),8:f.getMessage("sort_08_btn"),9:f.getMessage("sort_09_btn_type_0"),10:f.getMessage("sort_10_btn"),12:0===a?f.getMessage("sort_12_btn_type_0"):f.getMessage("sort_12_btn"),13:f.getMessage("sort_13_btn"),14:f.getMessage("sort_14_btn"),15:f.getMessage("sort_15_btn")}},setSortPopText:function(a,b){this.sortItemText={301:0===a?[f.getMessage("sort_301_txt_type_0"),f.getMessage("sort_01_btn_type_0")]:1===a?[f.getMessage("sort_301_txt_type_1"),f.getMessage("sort_01_btn_type_1")]:[f.getMessage("sort_301_txt_type_2"),f.getMessage("sort_01_btn_type_2")],401:0===a?[f.getMessage("sort_401_txt_type_0"),f.getMessage("sort_01_btn_type_0")]:1===a?[f.getMessage("sort_401_txt_type_1"),f.getMessage("sort_01_btn_type_1")]:[f.getMessage("sort_401_txt_type_2"),f.getMessage("sort_01_btn_type_2")],302:0===a?[f.getMessage("sort_302_txt_type_0"),f.getMessage("sort_02_btn_type_0")]:1===a?[f.getMessage("sort_302_txt_type_1"),f.getMessage("sort_02_btn_type_1")]:[f.getMessage("sort_302_txt_type_2"),f.getMessage("sort_02_btn_type_2")],402:0===a?[f.getMessage("sort_402_txt_type_0"),f.getMessage("sort_02_btn_type_0")]:1===a?[f.getMessage("sort_402_txt_type_1"),f.getMessage("sort_02_btn_type_1")]:[f.getMessage("sort_402_txt_type_2"),f.getMessage("sort_02_btn_type_2")],303:[f.getMessage("sort_303_txt"),f.getMessage("sort_03_btn")],403:[f.getMessage("sort_403_txt"),f.getMessage("sort_03_btn")],304:0===a?[f.getMessage("sort_304_txt_type_0"),f.getMessage("sort_04_btn_type_0")]:[f.getMessage("sort_304_txt"),f.getMessage("sort_04_btn")],404:0===a?[f.getMessage("sort_404_txt_type_0"),f.getMessage("sort_04_btn_type_0")]:[f.getMessage("sort_404_txt"),f.getMessage("sort_04_btn")],305:0===a?[f.getMessage("sort_305_txt_type_0"),f.getMessage("sort_05_btn_type_0")]:1===a?[f.getMessage("sort_305_txt_type_1"),f.getMessage("sort_05_btn_type_1")]:[f.getMessage("sort_305_txt_type_2"),f.getMessage("sort_05_btn_type_2")],405:0===a?[f.getMessage("sort_405_txt_type_0"),f.getMessage("sort_05_btn_type_0")]:1===a?[f.getMessage("sort_405_txt_type_2"),f.getMessage("sort_05_btn_type_1")]:[f.getMessage("sort_405_txt_type_2"),f.getMessage("sort_05_btn_type_2")],306:[f.getMessage("sort_306_txt"),f.getMessage("sort_06_btn")],406:[f.getMessage("sort_406_txt"),f.getMessage("sort_06_btn")],307:[f.getMessage("sort_307_txt"),f.getMessage("sort_07_btn")],407:[f.getMessage("sort_407_txt"),f.getMessage("sort_07_btn")],308:[f.getMessage("sort_308_txt"),f.getMessage("sort_08_btn")],408:[f.getMessage("sort_408_txt"),f.getMessage("sort_08_btn")],309:0===a?[f.getMessage("sort_309_txt_type_0"),f.getMessage("sort_09_btn_type_0")]:1===a?[f.getMessage("sort_309_txt_type_1"),f.getMessage("sort_09_btn_type_1")]:[f.getMessage("sort_309_txt_type_2"),f.getMessage("sort_09_btn_type_2")],409:0===a?[f.getMessage("sort_409_txt_type_0"),f.getMessage("sort_09_btn_type_0")]:1===a?[f.getMessage("sort_409_txt_type_1"),f.getMessage("sort_09_btn_type_1")]:[f.getMessage("sort_409_txt_type_2"),f.getMessage("sort_09_btn_type_2")],310:[f.getMessage("sort_310_txt"),f.getMessage("sort_10_btn")],410:[f.getMessage("sort_410_txt"),f.getMessage("sort_10_btn")],312:0===a?[f.getMessage("sort_312_txt_type_0"),f.getMessage("sort_12_btn_type_0")]:[f.getMessage("sort_312_txt"),f.getMessage("sort_12_btn")],412:0===a?[f.getMessage("sort_412_txt_type_0"),f.getMessage("sort_12_btn_type_0")]:[f.getMessage("sort_412_txt"),f.getMessage("sort_12_btn")],313:b===!0?[f.getMessage("sort_313_txt_archaic_possession"),f.getMessage("sort_13_btn_archaic_possession")]:[f.getMessage("sort_313_txt"),f.getMessage("sort_13_btn")],413:[f.getMessage("sort_413_txt"),f.getMessage("sort_13_btn")],314:0===a?[f.getMessage("sort_314_txt_type_0"),f.getMessage("sort_14_btn_type_0")]:[f.getMessage("sort_314_txt"),f.getMessage("sort_14_btn")],414:0===a?[f.getMessage("sort_414_txt_type_0"),f.getMessage("sort_14_btn_type_0")]:[f.getMessage("sort_414_txt"),f.getMessage("sort_14_btn")],315:[f.getMessage("sort_315_txt"),f.getMessage("sort_15_btn")],415:[f.getMessage("sort_415_txt"),f.getMessage("sort_15_btn")],316:[f.getMessage("sort_316_txt"),f.getMessage("sort_16_btn")],416:[f.getMessage("sort_416_txt"),f.getMessage("sort_16_btn")]},this.simpleSortSelectText={307:[f.getMessage("sort_filter_11"),f.getMessage("sort_filter_12")],407:[f.getMessage("sort_filter_13"),f.getMessage("sort_filter_14")],303:[f.getMessage("sort_filter_15"),f.getMessage("sort_filter_16")],403:[f.getMessage("sort_filter_17"),f.getMessage("sort_filter_18")],301:0===a?[f.getMessage("sort_filter_19"),f.getMessage("sort_filter_20")]:1===a?[f.getMessage("sort_filter_70"),f.getMessage("sort_filter_70")]:[f.getMessage("sort_filter_88"),f.getMessage("sort_filter_54")],401:0===a?[f.getMessage("sort_filter_21"),f.getMessage("sort_filter_22")]:1===a?[f.getMessage("sort_filter_71"),f.getMessage("sort_filter_71")]:[f.getMessage("sort_filter_89"),f.getMessage("sort_filter_55")],302:0===a?[f.getMessage("sort_filter_23"),f.getMessage("sort_filter_24")]:1===a?[f.getMessage("sort_filter_72"),f.getMessage("sort_filter_72")]:[f.getMessage("sort_filter_90"),f.getMessage("sort_filter_56")],402:0===a?[f.getMessage("sort_filter_25"),f.getMessage("sort_filter_26")]:1===a?[f.getMessage("sort_filter_73"),f.getMessage("sort_filter_73")]:[f.getMessage("sort_filter_91"),f.getMessage("sort_filter_57")],304:0===a?[f.getMessage("sort_filter_27"),f.getMessage("sort_filter_28")]:[f.getMessage("sort_filter_28"),f.getMessage("sort_filter_28")],404:0===a?[f.getMessage("sort_filter_29"),f.getMessage("sort_filter_30")]:[f.getMessage("sort_filter_30"),f.getMessage("sort_filter_30")],308:[f.getMessage("sort_filter_31"),f.getMessage("sort_filter_32")],408:[f.getMessage("sort_filter_33"),f.getMessage("sort_filter_34")],310:[f.getMessage("sort_filter_35"),f.getMessage("sort_filter_36")],410:[f.getMessage("sort_filter_37"),f.getMessage("sort_filter_38")],306:[f.getMessage("sort_filter_39"),f.getMessage("sort_filter_40")],406:[f.getMessage("sort_filter_41"),f.getMessage("sort_filter_42")],309:0===a?[f.getMessage("sort_filter_43"),f.getMessage("sort_filter_44")]:1===a?[f.getMessage("sort_filter_107"),f.getMessage("sort_filter_77")]:[f.getMessage("sort_filter_95"),f.getMessage("sort_filter_61")],409:0===a?[f.getMessage("sort_filter_45"),f.getMessage("sort_filter_46")]:1===a?[f.getMessage("sort_filter_106"),f.getMessage("sort_filter_76")]:[f.getMessage("sort_filter_94"),f.getMessage("sort_filter_60")],305:0===a?[f.getMessage("sort_filter_47"),f.getMessage("sort_filter_48")]:1===a?[f.getMessage("sort_filter_105"),f.getMessage("sort_filter_75")]:[f.getMessage("sort_filter_93"),f.getMessage("sort_filter_59")],405:0===a?[f.getMessage("sort_filter_49"),f.getMessage("sort_filter_50")]:1===a?[f.getMessage("sort_filter_104"),f.getMessage("sort_filter_74")]:[f.getMessage("sort_filter_92"),f.getMessage("sort_filter_58")],312:0===a?[f.getMessage("sort_filter_108"),f.getMessage("sort_filter_109")]:[f.getMessage("sort_filter_101"),f.getMessage("sort_filter_67")],412:0===a?[f.getMessage("sort_filter_110"),f.getMessage("sort_filter_111")]:[f.getMessage("sort_filter_100"),f.getMessage("sort_filter_66")],313:b===!0?[f.getMessage("sort_filter_limited_archaic_possession_1"),f.getMessage("sort_filter_limited_archaic_possession_1")]:[f.getMessage("sort_filter_96"),f.getMessage("sort_filter_62")],413:[f.getMessage("sort_filter_97"),f.getMessage("sort_filter_63")],314:[f.getMessage("sort_filter_98"),f.getMessage("sort_filter_64")],414:[f.getMessage("sort_filter_99"),f.getMessage("sort_filter_65")],315:[f.getMessage("sort_filter_103"),f.getMessage("sort_filter_69")],415:[f.getMessage("sort_filter_102"),f.getMessage("sort_filter_68")]}},_getContentType:function(a,b){var c=0;return a===!0&&(c=1,"exception_weapon"===b&&(c=2)),c},onChangeRessettableRadioBtn:function(a){var b=$(a.target).data("radio-category"),c=this.popView.$el.find('input[data-radio-category="'+b+'"]');_.each(c,function(b){b!==a.target&&$(b).prop("checked",!1)})},popSortChange:function(a){this.popView?this.popRemove(a):_.isUndefined(a)||this.stopEventPropagation(a,!0);var c=["first","second"],d={};d[1]=this.sortData[1]||this.getDefaultSortData(),d[2]=this.sortData[2];var e={kind:this.sortKind,sortData:d,sortItemTextObj:this.sortItemText,sortCondition:c,isExceptionType:this.isExceptionType},g=_.template($("#tpl-pop-sort-change").html(),e);this.popView=new b({className:"pop-sort-change",title:f.getMessage("sort_filter_52"),body:g,flagBtnCancel:1,flagBtnOk:1}),this.popView.render(),this.popView.$el.find(".js-sort-tab").tabs({tabClass:"btn-condition",tabTarg:"prt-condition-box"}),this.popView.popShow()},setSortChange:function(){var a=this.popView.$el.find(".pop-sort-change");this.sortData[1]=this.getSortRadioValue(a,["first-condition-check","first-ascending-radio"]),this.sortData[2]=this.getSortRadioValue(a,["second-condition-check","second-ascending-radio"]),this.isSortReset&&(this.isSortReset=!1,this.sortData[2]=this.sortData[1]),this.completeSortFilterData()},onChangeSecondCondition:function(){this.isSortReset=!1,_.isUndefined(this.popView.$el.find('input[name="second-ascending-radio"]:checked').val())&&$("#second-order-4").prop("checked",!0)},resetSortCondition:function(){this.isSortReset=!0;var a=this.getDefaultSortData();$("#first-condition-"+a[0]+", #first-order-"+a[1]).prop("checked",!0),this.popView.$el.find('input[name="second-condition-check"]:checked, input[name="second-ascending-radio"]:checked').prop("checked",!1)},countCheckBox:function(a){var b=$(a.currentTarget).parents(".prt-custom-filter-box"),c=this.popView.$el.find(".prt-condition-count."+b.data("box-name")),d=b.find('input[type="checkbox"]:checked').length;this.showCheckCountIcon(c,d)},getDefaultSortData:function(){return _.contains(["gacha_surprise","specialTicket"],this.viewContent)?this.defaultSpecialTiketSortData:this.defaultSortData},showCheckCountIcon:function(a,b){a.text(b).toggleClass("show",b>0)}});return g});
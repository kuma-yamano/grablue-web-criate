define(["model/data","view/quest/item-popup"],function(a,b){var c=null,d=a.extend({initialize:function(a){this.quest_id=a.quest_id,this.quest_type=a.quest_type,this.raid_type=a.raid_type,this.raid_id=a.raid_id,this.chapter_name=a.chapter_name,this.quest_ap=a.used_bp,this.cjs_id=a.cjs_id,this.is_semi=a.is_semi},check_quest:function(b){this.callback=b;var c=this,d=new(a.extend({urlRoot:Game.baseUri+"quest/battle_point_check/"+this.raid_id+"/"+this.quest_ap}));this.stopListening(d,"sync"),Game.loading.xhrStart(),d.fetch().done(function(a){Game.loading.xhrEnd(),c.battlepointCompare(a)})},battlepointCompare:function(a){a.result?this.callback(this.quest_id,this.quest_type,this.raid_type,this.raid_id,this.quest_ap,this.is_semi):(c&&c.popDelete(),c=new b({recovery:2,raid_id:this.raid_id,chapter_name:this.chapter_name,quest_ap:this.quest_ap,quest_id:this.quest_id,type:this.quest_type,cjs_id:this.cjs_id,is_semi:this.is_semi,pointData:{}}))}});return d});
define(["underscore"],function(a){var b={list:null};return{hasMessage:function(c){var d=b.list;return a.isNull(d)===!1&&a.isUndefined(d[c])===!1},setMessage:function(c,d){a.isNull(b.list)?b.list=c:a.isNull(c)||a.extend(b.list,c)},getMessage:function(a,c){"undefined"==typeof c&&(c=1);var d="ja"==Game.lang||1==c?"msg":"msgs";return b.list[a][d]||""},clearMessage:function(){b.list=null},replaceMessage:function(b,c,d){"undefined"==typeof d&&(d=1);var e=this.getMessage(b,d);return a.each(c,function(b,c){e=e.replace(a.isNumber(c)?"%s":c,b)}),e=e.replace(/\\n/g,"\n")},pluralMessage:function(b,c){"undefined"==typeof c&&(c=1);var d;if("ja"==Game.lang||1==c)return b;var e={"^CP$":{replace:"CP",flags:""},"^bag of rupies$":{replace:"bags of rupies",flags:""},"(knuckles)$":{replace:"$1",flags:"i"},"^Blade of the Scourged$":{replace:"Blades of the Scourged",flags:""},"^Horn of Bahamut$":{replace:"Horns of Bahamut",flags:""},"^Salad Tongs$":{replace:"Salad Tongs",flags:""},"^Guppies$":{replace:"Guppies",flags:""},"^Sky-High Fries$":{replace:"Sky-High Fries",flags:""},"^(Slab Memento)$":{replace:"$1s",flags:"i"},"^Cerulean Stones$":{replace:"Cerulean Stones",flags:""},"^(Water|Earth|Fire|Wind) Verum Proof$":{replace:"$1 Verum Proofs",flags:""},"^(Water|Earth|Fire|Wind|Dark|Light) Quartz$":{replace:"$1 Quartz",flags:""}},f={"(s|x|sh|ch|us)$":{replace:"$1es",flags:""},"([^aiueo])y$":{replace:"$1ies",flags:""},"([^aiueo])o$":{replace:"$1oes",flags:""},"([^f]f|fe)$":{replace:"ves",flags:""}},g=a.extend(e,f);return a.some(g,function(a,c){var e=new RegExp(c,a.flags);return b.match(e)?(d=b.replace(e,a.replace),!0):void 0}),d||(d=b+"s"),d}}});
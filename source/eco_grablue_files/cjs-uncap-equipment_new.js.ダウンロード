define(["view/cjs","model/cjs-loader","model/manifest-loader"],function(a,b,c){var d="uncap_equipment_new",e=a.extend({DEFAULT_FPS:12,events:{"tap #cjs-evolution":"cjsRemove","tap .onm-anim-mask":"cjsRemove"},initialize:function(a){window.uncap_equipment_star_gold=a.star_gold,window.uncap_equipment_star_blue=a.star_blue,window.uncap_equipment_star_after=a.star_after,window.uncap_equipment_max=a.max,window.uncap_equipment_lv1=a.lv1,window.uncap_equipment_lv2=a.lv2,window.uncap_equipment_is_after_lv_max=a.is_after_lv_max,window.uncap_equipment_skill_view=+!!a.skill_view,window.uncap_equipment_skill1=a.skill1||0,window.uncap_equipment_skill2=a.skill2||0,this.loadFiles()},loadFiles:function(){var a=this,c=[d];b.once("complete",function(){a.loadManifest(c)}),b.loadFiles(c)},loadManifest:function(a){var d=this,e=_.flatten(_.map(a,function(a){return b.manifest(a)}));c.once("complete",function(){d.cjsRender()}),c.loadManifest(e,!0)},cjsRender:function(){var a=$("#cjs-evolution");Game.get$ScrollParent().scrollTop(0),this.$el.find(".onm-anim-mask").css("display","block"),a.css("display","block"),this.stage=new createjs.Stage(a[0]),this.exportRoot=new lib[d],this.stage.addChild(this.exportRoot),this.stage.update(),createjs.Ticker.setFPS(this.DEFAULT_FPS),createjs.Ticker.addEventListener("tick",this.stage)},cjsRemove:function(){this.$el.find(".onm-anim-mask").css("display","none"),$("#cjs-evolution").css("display","none"),delete window.uncap_equipment_star_gold,delete window.uncap_equipment_star_blue,delete window.uncap_equipment_star_after,delete window.uncap_equipment_max,delete window.uncap_equipment_lv1,delete window.uncap_equipment_lv2,delete window.uncap_equipment_is_after_lv_max,delete window.uncap_equipment_skill_view,delete window.uncap_equipment_skill1,delete window.uncap_equipment_skill2,createjs.Ticker.removeAllEventListeners("tick"),this.destroyStage(this.stage),this.stage=null,delete this.stage,this.trigger("endCjsRemove")}});return e});
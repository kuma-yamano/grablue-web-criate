define(["view/cjs","model/cjs-loader","model/manifest-loader"],function(a,b,c){var d="uncap_character_new",e=a.extend({DEFAULT_FPS:12,events:{"tap #cjs-evolution-character":"cjsRemove"},initialize:function(a){window.cjs_exportRoot_uncap_character_new=null,window.uncap_character_star_gold=a.star_gold,window.uncap_character_star_blue=a.star_blue,window.uncap_character_star_after=a.star_after,window.uncap_character_max=a.max,window.uncap_character_lv1=a.lv1,window.uncap_character_lv2=a.lv2,window.uncap_character_is_after_lv_max=a.is_after_lv_max,this.beforeImage=a.beforeImage,this.afterImage=a.afterImage,this.type=a.type,this.loadFiles()},loadFiles:function(){var a=this,c=[d];Game.loading.xhrStart(),b.once("complete",function(){a.loadManifest(c)}),b.loadFiles(c)},loadManifest:function(a){var d=this,e=_.flatten(_.map(a,function(a){return b.manifest(a)})),f=Game.imgUri+"/sp/assets/"+d.type+"/"+d.type+"_evolution/main/",g=Game.imgUri+"/sp/assets/"+d.type+"/"+d.type+"_evolution/shadow/";e.push({src:f+d.beforeImage+".png",id:"uncap_character_new_char_1_img",type:"image"}),e.push({src:g+d.beforeImage+".png",id:"uncap_character_new_char_1w",type:"image"}),e.push({src:f+d.afterImage+".png",id:"uncap_character_new_char_2_img",type:"image"}),e.push({src:g+d.afterImage+".png",id:"uncap_character_new_char_2w",type:"image"}),c.once("complete",function(){d.cjsRender()}),c.loadManifest(e,!0)},cjsRender:function(){var a,b=$("#cjs-evolution-character");Game.get$ScrollParent().scrollTop(0),b.css("display","block"),window.uncap_character_new_id=this.beforeImage,window.cjs_exportRoot_uncap_character_new=new lib[d],a=new createjs.Container,a.addChild(window.cjs_exportRoot_uncap_character_new),window.cjs_stage_uncap_character_new=new createjs.Stage(b[0]),window.cjs_stage_uncap_character_new.addChild(a),window.cjs_stage_uncap_character_new.update(),createjs.Ticker.setFPS(this.DEFAULT_FPS),createjs.Ticker.addEventListener("tick",window.cjs_stage_uncap_character_new),Game.loading.xhrEnd()},cjsRemove:function(){$("#cjs-evolution-character").css("display","none"),delete window.uncap_character_new_id,delete window.cjs_exportRoot_uncap_character_new,delete window.uncap_character_star_gold,delete window.uncap_character_star_blue,delete window.uncap_character_star_after,delete window.uncap_character_max,delete window.uncap_character_lv1,delete window.uncap_character_lv2,delete window.uncap_character_is_after_lv_max,createjs.Ticker.removeAllEventListeners("tick"),this.destroyStage(window.cjs_stage_uncap_character_new),window.cjs_stage_uncap_character_new=null,delete window.cjs_stage_uncap_character_new,this.trigger("endCjsRemove")}});return e});
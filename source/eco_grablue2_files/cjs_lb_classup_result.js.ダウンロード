define(["view/cjs","model/cjs-loader","model/data","model/manifest-loader","model/sound","cjs/lb_classup_result","util/navigate","util/local-storage","view/common/workaround"],function(a,b,c,d,e,f,g,h,i){var j=24,k=a.extend({prevNpcVoice:null,initialize:function(a){window.stage=window.exportRoot=null,window.lb_classup_result_array=a.npcRankArray,window.npcVoiceFlg=!1,"undefined"!=typeof window.npcVoice&&(this.prevNpcVoice=window.npcVoice),window.npcVoice=a.npcVoice,this.canvas=document.getElementById("cjs-lp-rankup"),this.cjsName="lb_classup_result",this.attr=a},render:function(){return null!=stage&&(this.removeEvent(),this.removeChildren()),this.cjsRender(),this},cjsRender:function(){var a=[];a.push(this.cjsName),stage=new createjs.Stage(this.canvas,!0);var c=this;b.once("complete",function(){var f="lb_classup_result_charactor",g=_.flatten(_.map(a,function(a){return _.filter(b.manifest(a),function(a){return a.id!==f})}));g.push({id:f,src:Game.imgUri+"/sp/assets/npc/result_lvup/"+c.attr.npcImgId+".png",type:"image"}),d.once("complete",function(){if(window.CreateJsShell&&1==Game.setting.cjs_mode){c.canvas.setAttribute("cjs-context","shell");var a=c.canvas.getAttribute("dena-context");if("shell"==a)for(var b=c.canvas.parentElement;b;b=b.parentElement)b.style.backgroundColor="transparent"}Game.ua.isAndroid()&&"4.2.2"===Game.ua.os.version&&i.webkitGlobalRepaint(),createjs.Touch.isSupported()&&createjs.Touch.enable(stage),exportRoot=new lib[c.cjsName],stage.addChild(exportRoot),stage.update(),createjs.Ticker.setFPS(j),createjs.Ticker.addEventListener("tick",stage),c.prevNpcVoice&&e.stopVoice(c.prevNpcVoice)}),d.loadManifest(g,!0)}),b.loadFiles(a)},removeChildren:function(){stage.removeAllChildren(),stage.clear(),stage=null},destroy:function(){delete window.npcVoiceFlg,delete window.lb_classup_result_array,delete window.exportRoot}});return k});
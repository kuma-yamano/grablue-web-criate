define(["view/cjs","model/cjs-loader","model/manifest-loader"],function(a,b,c){var d=a.extend({targetCanvas:null,initialize:function(a){this.on("xhrStart",Game.loading.xhrStart),this.on("xhrEnd",Game.loading.xhrEnd),this.on("play",this.motionCall),window.cjs.canvas.sceneEffect=cjs.canvas.sceneEffect||null,window.cjs.stage.sceneEffect=cjs.stage.sceneEffect||null,window.cjs.exportRoot.sceneEffect=cjs.exportRoot.sceneEffect||null,this.targetCanvas="cjs-scene-effect",this.load="quest_encount",this.image_name=a.load,this.render()},render:function(){return null!=cjs.stage.sceneEffect&&(this.removeEvent(),this.removeChildren()),this.cjsRender(),this},cjsRender:function(){Game.loading.xhrStart();var a=[];a.push(this.load);var d=this;b.once("complete",function(){cjs.stage.sceneEffect&&d.removeEvent();var a=[{src:Game.imgUri+"/sp/cjs/quest_encount/"+d.image_name+"_base.jpg",id:"quest_encount_base"},{src:Game.imgUri+"/sp/cjs/quest_encount/"+d.image_name+"_ef_zoom.jpg",id:"quest_encount_ef_zoom"}];c.addEventListener("complete",function(){cjs.canvas.sceneEffect=document.getElementById(d.targetCanvas),cjs.exportRoot.sceneEffect=new lib[d.load];var a=new createjs.Container;a.addChild(cjs.exportRoot.sceneEffect),cjs.stage.sceneEffect=new createjs.Stage(cjs.canvas.sceneEffect),cjs.stage.sceneEffect.addChild(a),cjs.stage.sceneEffect.update(),createjs.Ticker.setFPS(12),createjs.Ticker.addEventListener("tick",cjs.stage.sceneEffect),Game.loading.xhrEnd()}),c.loadManifest(a)}),b.loadFiles(a,!1)},removeChildren:function(){cjs.stage.sceneEffect.removeAllChildren(),cjs.stage.sceneEffect.clear(),cjs.stage.sceneEffect=null},motionCall:function(){cjs.exportRoot.sceneEffect[this.load].gotoAndPlay(0)}});return d});
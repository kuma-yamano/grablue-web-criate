define(["view/cjs","model/cjs-loader","model/manifest-loader"],function(CjsView,CJSLoader,ManifestLoader){var cjsSceneEffectLoadView=CjsView.extend({targetCanvas:null,initialize:function(a){this.on("xhrStart",Game.loading.xhrStart),this.on("xhrEnd",Game.loading.xhrEnd),this.on("play",this.motionCall),window.cjs.canvas.sceneEffect=cjs.canvas.sceneEffect||null,window.cjs.stage.sceneEffect=cjs.stage.sceneEffect||null,window.cjs.exportRoot.sceneEffect=cjs.exportRoot.sceneEffect||null,this.targetCanvas="cjs-scene-effect",this.load=a.load,this.label=a.label,this.render()},render:function(){return null!=cjs.stage.sceneEffect&&(this.removeEvent(),this.removeChildren()),this.cjsRender(),this},cjsRender:function(){Game.loading.xhrStart();var a=[];a.push(this.load);var b=this;CJSLoader.once("complete",function(){cjs.stage.sceneEffect&&b.removeEvent(),cjs.canvas.sceneEffect=document.getElementById(b.targetCanvas),cjs.exportRoot.sceneEffect=new lib[b.load];var a=new createjs.Container;a.addChild(cjs.exportRoot.sceneEffect),cjs.stage.sceneEffect=new createjs.Stage(cjs.canvas.sceneEffect),cjs.stage.sceneEffect.addChild(a),cjs.stage.sceneEffect.update(),createjs.Ticker.setFPS(12),createjs.Ticker.addEventListener("tick",cjs.stage.sceneEffect),Game.loading.xhrEnd()}),CJSLoader.loadFiles(a,!0)},removeChildren:function(){cjs.stage.sceneEffect.removeAllChildren(),cjs.stage.sceneEffect.clear(),cjs.stage.sceneEffect=null},motionCall:function(){eval("cjs.exportRoot.sceneEffect."+this.load+".gotoAndPlay(0);")}});return cjsSceneEffectLoadView});